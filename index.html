<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-commerce Funnel Simulation</title>
    
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PWL3927F');</script>
    <style>
        /* Î‘Ï€Î»Î¬ styles Î³Î¹Î± Î½Î± ÎµÎ¯Î½Î±Î¹ ÎµÏ…Î´Î¹Î¬ÎºÏÎ¹Ï„Î± Ï„Î± Î²Î®Î¼Î±Ï„Î± */
        body { font-family: Arial, sans-serif; padding: 20px; background-color: #f4f4f4; }
        .form-container { background: #fff; padding: 20px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .submit-button { padding: 10px 15px; background-color: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px; }
        .submit-button:hover { opacity: 0.9; }
        .submit-button:disabled { background-color: #ccc; cursor: not-allowed; }
        #checkout-section, #purchase-section { border-left: 5px solid; padding-left: 15px; }
        #checkout-section { border-color: #f39c12; }
        #purchase-section { border-color: #27ae60; }
    </style>
</head>
<body>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PWL3927F"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div class="header-container">
        <h1>E-commerce Funnel Simulation (GTM Test)</h1>
        <p>Î Î±Ï„Î®ÏƒÏ„Îµ Ï„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ Î¼Îµ Ï„Î· ÏƒÎµÎ¹ÏÎ¬ Î³Î¹Î± Î½Î± Ï€Ï…ÏÎ¿Î´Î¿Ï„Î®ÏƒÎµÏ„Îµ Ï„Î± events ÏƒÏ„Î¿ Data Layer.</p>
    </div>
    
    <div class="product-card form-container">
        <h2>Marketing Package Pro</h2>
        <p>SKU: MKTPKG_PRO_2025</p>
        <p>Î¤Î¹Î¼Î®: **â‚¬150.00**</p>
        <button id="addToCartButton" class="submit-button">ğŸ›’ 1. Add to Cart</button>
    </div>

    <div id="checkout-section" class="form-container" style="display: none;">
        <h3>ÎšÎ±Î»Î¬Î¸Î¹: 1 Î ÏÎ¿ÏŠÏŒÎ½</h3>
        <button id="checkoutButton" class="submit-button" style="background-color: #f39c12;">â¡ï¸ 2. Begin Checkout</button>
    </div>

    <div id="purchase-section" class="form-container" style="display: none;">
        <h3>ÎŸÎ»Î¿ÎºÎ»Î®ÏÏ‰ÏƒÎ·</h3>
        <p>ÎŸÎ»Î¿ÎºÎ»Î·ÏÏÏƒÏ„Îµ Ï„Î·Î½ Î±Î³Î¿ÏÎ¬ ÏƒÎ±Ï‚ Î³Î¹Î± Î½Î± Î¼ÎµÏ„Î±Ï†ÎµÏÎ¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î· ÏƒÎµÎ»Î¯Î´Î± ÎµÏ€Î¹Ï„Ï…Ï‡Î¯Î±Ï‚.</p>
        <button id="completePurchaseButton" class="submit-button" style="background-color: #27ae60;">âœ… 3. Complete Purchase</button>
    </div>

    <script>
        // Î”ÎµÎ´Î¿Î¼Î­Î½Î± Î ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚ (Î‘Ï€Î±ÏÎ±Î¯Ï„Î·Ï„Î± Î³Î¹Î± Ï„Î± events add_to_cart, begin_checkout ÎºÎ±Î¹ purchase)
        const itemData = {
            'item_id': 'MKTPKG_PRO_2025',
            'item_name': 'Marketing Package Pro',
            'item_category': 'Services',
            'price': 150.00,
            'quantity': 1
        };

        // 1. Add to Cart Event
        document.getElementById('addToCartButton').addEventListener('click', function() {
            // Push 'add_to_cart' event to Data Layer (GTM Enhanced E-commerce Event)
            window.dataLayer.push({
                'event': 'add_to_cart',
                'ecommerce': {
                    'items': [itemData] // Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Ï„Î¿Ï… Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚
                }
            });
            console.log('GTM Event Fired: add_to_cart');
            
            // Î ÏÎ¿Ï‡Ï‰ÏÎ¬Î¼Îµ ÏƒÏ„Î¿ ÎµÏ€ÏŒÎ¼ÎµÎ½Î¿ Î²Î®Î¼Î±
            document.getElementById('checkout-section').style.display = 'block';
            this.disabled = true;
        });

        // 2. Begin Checkout Event
        document.getElementById('checkoutButton').addEventListener('click', function() {
            // Push 'begin_checkout' event to Data Layer
            window.dataLayer.push({
                'event': 'begin_checkout',
                'ecommerce': {
                    'items': [itemData]
                }
            });
            console.log('GTM Event Fired: begin_checkout');
            
            // Î ÏÎ¿Ï‡Ï‰ÏÎ¬Î¼Îµ ÏƒÏ„Î¿ Ï„ÎµÎ»Î¹ÎºÏŒ Î²Î®Î¼Î±
            document.getElementById('purchase-section').style.display = 'block';
            this.disabled = true;
        });

        // 3. Complete Purchase Action (Redirection)
        document.getElementById('completePurchaseButton').addEventListener('click', function() {
            // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± ÏˆÎµÏÏ„Î¹ÎºÎ¿Ï… Transaction ID ÎºÎ±Î¹ Value
            const transactionId = 'T-' + Math.floor(Math.random() * 1000000);
            
            // Î‘Î½Î±ÎºÎ±Ï„ÎµÏÎ¸Ï…Î½ÏƒÎ· ÏƒÏ„Î¿ submit_form.html, Î¼ÎµÏ„Î±Ï†Î­ÏÎ¿Î½Ï„Î±Ï‚ Ï„Î¹Ï‚ Î±Ï€Î±ÏÎ±Î¯Ï„Î·Ï„ÎµÏ‚ Ï€Î±ÏÎ±Î¼Î­Ï„ÏÎ¿Ï…Ï‚
            // Î¤Î¿ Ï„ÎµÎ»Î¹ÎºÏŒ event 'purchase' Î¸Î± Ï€Ï…ÏÎ¿Î´Î¿Ï„Î·Î¸ÎµÎ¯ ÏƒÏ„Î¿ submit_form.html
            window.location.href = `submit_form.html?transaction_id=${transactionId}&value=150.00`;
        });
    </script>
</body>
</html>
